# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: r
bioc_required: true
r:
  - bioc-release

# Note: 11/19/2020 travis is not installing R 4.1 which is required for bioc-dev 3.13
# not building on bioc-devel until there's a patch in travis
#  - bioc-devel

sudo: false
cache: packages
r_build_args: --no-build-vignettes --no-manual
r_check_args: --no-build-vignettes --no-manual --as-cran

before_install:
- Rscript -e '.libPaths("/home/travis/R/Library")'
- Rscript -e 'install.packages("dbplyr")'
- Rscript -e 'install.packages("dplyr")'
- Rscript -e 'install.packages("RSQLite")'
- Rscript -e 'install.packages("DBI")'
- Rscript -e 'install.packages("filelock")'
- Rscript -e 'install.packages("curl")'
- Rscript -e 'install.packages("httr")'
- Rscript -e 'install.packages("https://bioconductor.org/packages/release/bioc/src/contrib/BiocFileCache_2.10.1.tar.gz", repos=NULL, method="libcurl", dep=T)'

os:
  - linux
r_packages:
  - covr
after_success:
- Rscript -e 'packageVersion("BiocFileCache")'
- Rscript -e 'packageVersion("dbplyr")'
- Rscript -e 'library(covr); codecov()'
